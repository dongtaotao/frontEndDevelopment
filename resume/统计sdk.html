前端搞监控|Jimmy - 如何针对 APP 自建前端监控体系
https://zhuanlan.zhihu.com/p/157812258

前端搞监控|Allan - 如何实现一套多端错误监控平台
https://zhuanlan.zhihu.com/p/158079491  好文章

前端搞监控|烛象 - 如何设计前端实时分析及报警系统
https://zhuanlan.zhihu.com/p/159115081


腾讯二面：现在要你实现一个埋点监控SDK，你会怎么设计？ https://juejin.cn/post/7085679511290773534  🔥🔥🔥

从零开始搞监控系统（1）——SDK https://juejin.cn/post/7090741336294293540
从零开始搞监控系统（3）——性能监控 https://juejin.cn/post/7090743747041820686

performance.timing
性能监控  页面时间，白屏时间等 https://juejin.cn/post/7090743747041820686

从零开始搞监控系统（3）——性能监控
首屏时间 https://juejin.cn/post/7090743747041820686#heading-2
第一种是算出首屏页面中所有图片都加载完后的时间，这种方法难以覆盖所有场景，并且计算结果并不准。
第二种是自定义首屏时间，也就是自己来控制何时算首屏全部加载好了，这种方法相对来说要精确很多。

前端监控系统🔥🔥🔥
https://juejin.cn/column/7090542280624472077 
从零开始搞监控系统（1）——SDK
从零开始搞监控系统（2）——存储和分析
从零开始搞监控系统（3）——性能监控
从零开始搞监控系统（4）——内存泄漏
从零开始搞监控系统（5）——小程序监控
从零开始搞监控系统（6）——较长的白屏时间
从零开始搞监控系统（7）——监控页面奔溃 https://juejin.cn/post/709074772

http://www.alloyteam.com/2020/01/14184/#prettyPhoto
performance.navigation: 页面是加载还是刷新、发生了多少次重定向
performance.timing: 页面加载的各阶段时长
performance.memory： 基本内存使用情况，Chrome 添加的一个非标准扩展


如何进行 web 性能监控？
http://www.alloyteam.com/2020/01/14184/#prettyPhoto

面试必问：前端性能监控Performance https://juejin.cn/post/7031572366341701663?utm_source=gold_browser_extension 🔥好文章

4. paint Timing API
首屏渲染时间、首次有内容渲染时间


2. 首屏时间计算
我们知道首屏时间是一项重要指标，但是又很难从 performance 中拿到，来看下首屏时间计算主要有哪些方式？
1）用户自定义打点—最准确的方式（只有用户自己最清楚，什么样的时间才算是首屏加载完成）
5）利用 MutationObserver 接口提供了监视对 DOM 树所做更改的能力，是 DOM3 Events 规范的一部分。
方法：在首屏内容模块插入一个 div，利用 Mutation Observer API 监听该 div 的 dom 事件，判断该 div 的高度是否大于 0 或者大于指定值，如果大于了，
就表示主要内容已经渲染出来，可计算首屏时间。


3. 异常上报
1）js error
监听 window.onerror 事件
2）promise reject 的异常
监听 unhandledrejection 事件
window.addEventListener("unhandledrejection", function (event) {
    console.warn("WARNING: Unhandled promise rejection. Shame on you! Reason: "
        + event.reason);
});
3）资源加载失败
window.addEventListener('error')
4）网络请求失败
重写 window.XMLHttpRequest 和 window.fetch 捕获请求错误
5）iframe 异常
window.frames[0].onerror
6）window.console.error


5 分钟撸一个前端性能监控工具
https://juejin.cn/post/6844903662020460552
10分钟彻底搞懂前端页面性能监控https://zhuanlan.zhihu.com/p/82981365


来，跟我一起 ，自研多端错误监控平台（完整版） 🔥 es查询数据
https://juejin.cn/post/6844904202917904391
SDK 小结
我们用一句话对 SDK 进行小结:
监听 / 劫持 原始方法，获取需要上报的数据，在错误发生时 触发 函数使用 gif 上报。
为了方便记忆，提炼 3 个关键词：劫持、原始方法、gif！（如果你还记不住，那也别打我）

从 ES 中获取数据非常简单，ES 底层是基于 Lucene 的搜索服务器的，它提供了一个分布式多用户能力的全文搜索引擎，
基于 RESTful web 接口。所以我们前端开发只需要想平时开发业务调用接口一样去调用就可以了。 



、、const PV_URL_SET = new Set()

class MyStatistic {
    constructor(productId) {
        this.productId = productId
        this.initPerformance() // 性能统计
        this.initError() // 错误监控
    }
    // 发送统计数据
    send(url, params = {}) {
        params.productId = productId
        const paramArr = []
        for (let key in params) {
            const val = params[key]
            paramArr.push(`${key}=${value}`)
        }
        const newUrl = `${url}?${paramArr.join('&')}` // url?a=10&b=20
        // 用 <img> 发送：1. 可跨域；2. 兼容性非常好
        const img = document.createElement('img')
        img.src = newUrl // get
    }
    // 初始化性能统计
    initPerformance() {
        const url = 'yyy'
        this.send(url, performance.timing) // 给最原始的、完整的结果，原始数据
    }
    // 初始化错误监控
    initError() {
        window.addEventListener('error', event => {
            const { error, lineno, colno } = event
            this.error(error, { lineno, colno })
        })
        // Promise 未 catch 住的报错
        window.addEventListener('unhandledrejection', event => {
            this.error(new Error(event.reason), { type: 'unhandledrejection' })
        })
    }
    pv() {
        const href = location.href
        if (PV_URL_SET.get(href)) return // 不重复发送 pv
        this.event('pv')
        PV_URL_SET.add(href)
    }
    event(key, val) {
        const url = 'xxx' // 自定义事件统计 server API
        this.send(url, {key, val})
    }
    error(err, info = {}) {
        const url = 'zzz'
        const { message, stack } = err
        this.send(url, { message, stack, ...info  })
    }
}


腾讯三面：说说前端监控平台/监控SDK的架构设计和难点亮点？
https://juejin.cn/post/7108660942686126093

一文摸清前端监控自研实践（一）性能监控
https://juejin.cn/post/7097157902862909471
一文摸清前端监控自研实践（二）行为监控
https://juejin.cn/post/7098656658649251877
一文摸清前端监控自研实践（三）错误监控
https://juejin.cn/post/7100841779854835719/

【前端监控】前端异常捕获与处理
https://juejin.cn/post/7221481997571047482



前端监控系统 - 捕获报错
前端报错

JS 代码运行错误、语法错误等
异步错误（分为普通异步错误：setTimeout、Promise、async 语法糖等）
静态资源加载错误
接口请求报错（window.XMLHttpRequest 、 window.fetch）

捕获错误的方法

try catch
window.onerror
window.addEventListener 的 error
window.addEventListener 的 unhandledrejection

链接：https://juejin.cn/post/7234807896146444344